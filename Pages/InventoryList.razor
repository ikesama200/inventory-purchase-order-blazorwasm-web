@page "/inventoryList"
@inject HttpClient Http

<PageTitle>在庫一覧</PageTitle>

<h1>在庫一覧</h1>

<p>現在の在庫一覧を表示します。</p>

@if (inventorys == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <table class="table">
        <thead>
            <tr>
                <th>商品ID</th>
                <th>商品名</th>
                <th>カテゴリID</th>
                <th>カテゴリ名</th>
                <th>在庫数</th>
                <th>最終更新日時</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var inventory in inventorys)
            {
                <tr>
                    <td>@inventory.category_id</td>
                    <td>@inventory.category_name</td>
                    <td>@inventory.product_code</td>
                    <td>@inventory.product_name</td>
                    <td>@inventory.quantity</td>
                    <td>@inventory.last_updated</td>

                </tr>
            }

        </tbody>
    </table>
}

@code {
    private InventoryListModel[]? inventorys;

    // 初期処理
    protected override async Task OnInitializedAsync()
    {
        inventorys = await Http.GetFromJsonAsync<InventoryListModel[]>("sample-data/inventorys.json");

        //inventorys = await Http.GetFromJsonAsync<InventoryListModel[]>("http://192.168.2.220:8080/get-inventory-list");

        /*
        var response = await Http.GetAsync("http://192.168.2.220:8080/get-inventory-list");
        Console.WriteLine($"Status Code: {response.StatusCode}");
        var content = await response.Content.ReadAsStringAsync();
        Console.WriteLine("Response Body: " + content);
        */
    }

    // 在庫一覧のクラス
    public class InventoryListModel
    {
        // 商品ID
        public string? product_code { get; set; }
        // 商品名
        public string? product_name { get; set; }
        // カテゴリID
        public string? category_id { get; set; }
        // カテゴリ名
        public string? category_name { get; set; }
        // 在庫数
        public string? quantity { get; set; }
        // 最終更新日時
        public string? last_updated { get; set; }
    }
}
